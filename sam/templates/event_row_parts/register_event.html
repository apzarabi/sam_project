<script type="text/javascript">
    function configureDropDownLists(ddl1,ddl2) {
        switch (ddl1.value) {
            {% for category in categories %}
            case "{{ category.id }}":
                ddl2.options.length = 0;
                {% for subcat in category.subcategory_set.all %}
                    createOption(ddl2, "{{ subcat.name }}", {{ subcat.id }});
                {% endfor %}
                break;
            {% endfor %}
        }

    }

    function createOption(ddl, text, value) {
        var opt = document.createElement('option');
        opt.value = value;
        opt.text = text;
        ddl.options.add(opt);
    }
</script>




<form name="register_event" method="post" action="{% url 'events:register_event' %}" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-inline">
        <div class="form-group">
            <label for="category"> دسته </label>
            <select name="category" class="form-control" id="category" onchange="configureDropDownLists(this,document.getElementById('subcategory'))">
                {% for category in categories %}
                    <option value="{{ category.id }}"> {{ category.name }} </option>
                {% endfor %}
            </select>
        </div>
    </div>
    <br>
    {% with categories.all|first as first_category %}
        <div class="form-inline">
            <div class="form-group">
                <label for="category">زیردسته</label>
                <select name="subcategory" class="form-control" id="subcategory">

                    {% for subcat in first_category.subcategory_set.all %}
                        <option value="{{ subcat.id }}"> {{ subcat.name }} </option>
                    {% endfor %}

                </select>
            </div>
        </div>
    {% endwith %}
    <br>
    <br>
    {{ eventform }}
    <br>

    <div class="form-inline">
        <label for="ticket-name">نام</label>
        <input type="text" class="form-control" id="ticket-name" required>

        <label for="price"> قیمت</label>
        <input type="text" class="form-control" id="price" required>

        <label for="count">تعداد</label>
        <input type="text" class="form-control" id="count" required>

        <label for="ticket-date">تاریخ</label>
        <input type="date" class="form-control" id="ticket-date" required>

        <div id="add-ticket-type" class="btn btn-info"> افزودن نوع بلیط </div>
    </div>

    <div>
        <ul id="sam-ticket-types">

        </ul>
    </div>
    <br>
    <button type="submit" class="btn btn-success"> ثبت </button>
</form>

